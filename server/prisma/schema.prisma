
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user {
  id            String    @id @default(uuid()) @map("_id") @db.Uuid
  name          String?
  phone_number  String    @unique
  email         String?   @unique
  ratings       Float     @default(0)
  totalRides    Float     @default(0)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  rides         rides[]   @relation("UserRides")
}

enum VehicleType {
  Car
  Motorcycle
  CNG
}

model driver {
  id                  String        @id @default(uuid()) @map("_id") @db.Uuid
  name                String
  country             String
  phone_number        String        @unique
  email               String        @unique
  vehicle_type        VehicleType
  registration_number String        @unique
  registration_date   String
  driving_license     String
  vehicle_color       String?
  rate                String
  notificationToken   String?
  ratings             Float         @default(0)
  totalEarning        Float         @default(0)
  totalRides          Float         @default(0)
  pendingRides        Float         @default(0)
  cancelRides         Float         @default(0)
  status              String        @default("inactive")
  createdAt           DateTime      @default(now())
  updatedAt           DateTime      @updatedAt
  rides               rides[]       @relation("DriverRides")
}

model rides {
  id          String    @id @default(uuid()) @map("_id") @db.Uuid
  userId      String    @db.Uuid
  driverId    String    @db.Uuid
  charge      Float
  user        user      @relation("UserRides", fields: [userId], references: [id])
  driver      driver    @relation("DriverRides", fields: [driverId], references: [id])
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}